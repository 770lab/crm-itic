<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestion Effectifs 2025-26</title>
<link rel="manifest" href="data:application/json,%7B%22name%22%3A%22Gestion%20Effectifs%22%2C%22short_name%22%3A%22Effectifs%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%231a1a2e%22%2C%22theme_color%22%3A%22%23667eea%22%7D">
<meta name="theme-color" content="#667eea">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:system-ui,-apple-system,sans-serif;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);min-height:100vh;color:#fff}
.app{max-width:1400px;margin:0 auto;padding:20px}
.header{display:flex;justify-content:space-between;align-items:center;padding:20px;background:rgba(255,255,255,0.05);border-radius:16px;margin-bottom:24px;backdrop-filter:blur(10px);flex-wrap:wrap;gap:12px}
.logo{display:flex;align-items:center;gap:12px}
.logo span{font-size:32px}
.logo h1{font-size:22px;font-weight:600}
.header-buttons{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.user-info{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.1);padding:8px 16px;border-radius:20px;font-size:14px}
.user-info span{color:#2ed573}
.btn{padding:12px 24px;border:none;border-radius:12px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:8px}
.btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(102,126,234,0.4)}
.btn-secondary{background:rgba(255,255,255,0.1);color:#fff}
.btn-secondary:hover{background:rgba(255,255,255,0.15)}
.btn-success{background:linear-gradient(135deg,#2ed573 0%,#7bed9f 100%);color:#1a1a2e}
.btn-success:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(46,213,115,0.4)}
.btn-warning{background:linear-gradient(135deg,#ff9f43 0%,#ffc048 100%);color:#1a1a2e}
.btn-warning:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(255,159,67,0.4)}
.btn-danger{background:rgba(255,71,87,0.2);color:#ff4757}
.btn-danger:hover{background:rgba(255,71,87,0.3)}
.btn-sm{padding:8px 16px;font-size:13px}
.btn:disabled{opacity:0.5;cursor:not-allowed;transform:none!important}
.btn.loading{pointer-events:none;opacity:0.7}
.btn.loading::after{content:'';position:absolute;width:16px;height:16px;border:2px solid transparent;border-top-color:currentColor;border-radius:50%;animation:spin 0.6s linear infinite;right:10px}
.btn{position:relative}
.alert-badge{position:relative}
.alert-badge .badge{position:absolute;top:-6px;right:-6px;background:#ff4757;color:#fff;font-size:10px;font-weight:700;min-width:18px;height:18px;border-radius:9px;display:flex;align-items:center;justify-content:center;padding:0 5px;animation:pulse-badge 2s infinite}
@keyframes pulse-badge{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
.readonly-banner{background:rgba(255,159,67,0.15);border:1px solid rgba(255,159,67,0.3);color:#ff9f43;padding:10px 20px;border-radius:12px;margin-bottom:20px;font-size:13px;display:flex;align-items:center;gap:10px}
.view-toggle{display:flex;gap:2px;background:rgba(255,255,255,0.05);border-radius:10px;padding:3px;border:1px solid rgba(255,255,255,0.08)}
.view-toggle button{padding:8px 14px;border:none;background:none;color:rgba(255,255,255,0.4);cursor:pointer;border-radius:8px;font-size:16px;transition:all 0.2s}
.view-toggle button.active{background:rgba(102,126,234,0.3);color:#fff}
.view-toggle button:hover{color:#fff}
.students-grid.list-view{grid-template-columns:1fr;gap:8px}
.students-grid.list-view .student-card{display:grid;grid-template-columns:1fr auto 200px 120px;align-items:center;padding:16px 24px;gap:20px}
.students-grid.list-view .student-header{margin-bottom:0}
.students-grid.list-view .student-details{margin-bottom:0;display:flex;gap:16px}
.students-grid.list-view .payment-progress{width:200px}
.students-grid.list-view .payment-info{margin-top:4px;font-size:12px}
.students-grid.list-view .student-card:hover{transform:none;border-color:rgba(102,126,234,0.5)}
.empty-state{grid-column:1/-1;text-align:center;padding:80px 40px;background:rgba(255,255,255,0.02);border-radius:20px;border:2px dashed rgba(255,255,255,0.1)}
.empty-state .empty-icon{font-size:72px;display:block;margin-bottom:20px;opacity:0.8}
.empty-state h3{font-size:20px;margin-bottom:12px;color:rgba(255,255,255,0.8)}
.empty-state p{color:rgba(255,255,255,0.4);font-size:15px;margin-bottom:24px;max-width:400px;margin-left:auto;margin-right:auto}
.relance-preview{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:20px;font-size:14px;line-height:1.6;color:rgba(255,255,255,0.8);white-space:pre-wrap;margin-bottom:16px}
.relance-actions{display:flex;gap:10px;flex-wrap:wrap}
.dashboard{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}
.stat-card{background:rgba(255,255,255,0.05);border-radius:16px;padding:24px;display:flex;align-items:center;gap:16px;border:1px solid rgba(255,255,255,0.1);transition:all 0.3s;cursor:pointer}
.stat-card:hover{transform:translateY(-4px);border-color:rgba(255,255,255,0.2)}
.stat-icon{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px}
.stat-icon.blue{background:rgba(102,126,234,0.2)}
.stat-icon.green{background:rgba(46,213,115,0.2)}
.stat-icon.orange{background:rgba(255,159,67,0.2)}
.stat-icon.red{background:rgba(255,71,87,0.2)}
.stat-value{font-size:28px;font-weight:700;display:block}
.stat-label{font-size:14px;color:rgba(255,255,255,0.6)}

/* Onglets */
.tabs{display:flex;gap:4px;margin-bottom:24px;background:rgba(255,255,255,0.05);border-radius:14px;padding:4px;border:1px solid rgba(255,255,255,0.08)}
.tab{padding:12px 28px;border:none;background:none;color:rgba(255,255,255,0.5);font-size:14px;font-weight:600;cursor:pointer;border-radius:10px;transition:all 0.25s;display:flex;align-items:center;gap:8px}
.tab:hover{color:#fff;background:rgba(255,255,255,0.05)}
.tab.active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 4px 15px rgba(102,126,234,0.3)}
.tab-content{display:none}
.tab-content.active{display:block}

/* Stats page */
.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:24px}
.stats-panel{background:rgba(255,255,255,0.05);border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,0.08)}
.stats-panel.full{grid-column:1/-1}
.stats-panel h3{font-size:16px;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.stats-table{width:100%;border-collapse:collapse}
.stats-table th{text-align:left;font-size:12px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.5px;padding:10px 12px;border-bottom:1px solid rgba(255,255,255,0.1)}
.stats-table td{padding:10px 12px;font-size:14px;border-bottom:1px solid rgba(255,255,255,0.05)}
.stats-table tr{cursor:pointer;transition:background 0.2s}
.stats-table tr:hover td{background:rgba(102,126,234,0.1)}
.stats-table .count{font-weight:700;color:#667eea;text-align:right}
.stats-table .bar-cell{width:40%}
.stats-bar{height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden}
.stats-bar-fill{height:100%;border-radius:4px;background:linear-gradient(90deg,#667eea,#764ba2);transition:width 0.5s}
.stats-back-btn{margin-bottom:20px}
.financial-summary{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:20px}
.financial-card{background:rgba(255,255,255,0.03);border-radius:12px;padding:20px;text-align:center;border:1px solid rgba(255,255,255,0.05)}
.financial-card .big{font-size:24px;font-weight:700;display:block;margin-bottom:4px}
.financial-card .big.green{color:#2ed573}
.financial-card .big.orange{color:#ff9f43}
.financial-card .big.blue{color:#667eea}
.financial-card .small{font-size:12px;color:rgba(255,255,255,0.5)}
@media(max-width:700px){.stats-grid{grid-template-columns:1fr}.financial-summary{grid-template-columns:1fr}}
.filters{display:flex;gap:16px;margin-bottom:24px;flex-wrap:wrap;align-items:center}
.search-box{flex:1;min-width:250px;display:flex;align-items:center;background:rgba(255,255,255,0.05);border-radius:12px;padding:0 16px;border:1px solid rgba(255,255,255,0.1)}
.search-box input{flex:1;background:none;border:none;padding:14px;color:#fff;font-size:14px;outline:none}
.search-box input::placeholder{color:rgba(255,255,255,0.4)}
.filters select{padding:14px 20px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;color:#fff;font-size:14px;cursor:pointer}
.filters select option{background:#1a1a2e}
.students-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}
.student-card{background:rgba(255,255,255,0.05);border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,0.1);transition:all 0.3s;cursor:pointer}
.student-card:hover{transform:translateY(-5px);border-color:rgba(102,126,234,0.5);box-shadow:0 20px 40px rgba(0,0,0,0.3)}
.student-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}
.student-name{font-size:18px;font-weight:600;margin-bottom:6px}
.student-formation{font-size:12px;color:rgba(255,255,255,0.7);background:rgba(102,126,234,0.2);padding:4px 10px;border-radius:20px;display:inline-block}
.status-badge{padding:6px 12px;border-radius:20px;font-size:11px;font-weight:600}
.status-badge.ok{background:rgba(46,213,115,0.2);color:#2ed573}
.status-badge.pending{background:rgba(255,159,67,0.2);color:#ff9f43}
.status-badge.late{background:rgba(255,71,87,0.2);color:#ff4757}
.student-details{margin-bottom:16px}
.detail-row{display:flex;align-items:center;gap:8px;font-size:14px;color:rgba(255,255,255,0.7);margin-bottom:8px}
.payment-progress{background:rgba(255,255,255,0.1);height:8px;border-radius:4px;overflow:hidden}
.payment-bar{height:100%;border-radius:4px;transition:width 0.5s}
.payment-bar.ok{background:linear-gradient(90deg,#2ed573,#7bed9f)}
.payment-bar.pending{background:linear-gradient(90deg,#ff9f43,#ffc048)}
.payment-bar.late{background:linear-gradient(90deg,#ff4757,#ff6b81)}
.payment-info{display:flex;justify-content:space-between;margin-top:10px;font-size:13px;color:rgba(255,255,255,0.6)}

/* Login */
.login-container{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}
.login-box{background:rgba(255,255,255,0.05);border-radius:20px;padding:40px;width:100%;max-width:400px;border:1px solid rgba(255,255,255,0.1)}
.login-box h1{text-align:center;margin-bottom:10px;font-size:28px}
.login-box .subtitle{text-align:center;color:rgba(255,255,255,0.6);margin-bottom:30px}
.login-box .form-group{margin-bottom:20px}
.login-box label{display:block;margin-bottom:8px;font-size:14px;font-weight:500}
.login-box input{width:100%;padding:14px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:12px;color:#fff;font-size:15px}
.login-box input:focus{outline:none;border-color:#667eea}
.login-box .btn{width:100%;justify-content:center;padding:16px}
.login-error{background:rgba(255,71,87,0.2);color:#ff4757;padding:12px;border-radius:10px;margin-bottom:20px;text-align:center;display:none}
.login-footer{text-align:center;margin-top:30px;color:rgba(255,255,255,0.4);font-size:13px}
.login-footer a{color:#667eea;text-decoration:none}

/* Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(5px);padding:20px}
.modal-overlay.active{display:flex}
.modal{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:20px;width:100%;max-width:700px;max-height:90vh;overflow-y:auto;border:1px solid rgba(255,255,255,0.1)}
.modal-header{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:1px solid rgba(255,255,255,0.1)}
.modal-header h2{font-size:20px;font-weight:600}
.close-btn{width:36px;height:36px;border:none;background:rgba(255,255,255,0.1);color:#fff;border-radius:50%;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center}
.close-btn:hover{background:rgba(255,255,255,0.2)}
.modal-body{padding:24px}
.form-group{margin-bottom:20px}
.form-group label{display:block;margin-bottom:10px;font-size:14px;font-weight:500}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;color:#fff;font-size:14px;outline:none;transition:border-color 0.3s}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-color:#667eea}
.form-group select option{background:#1a1a2e;color:#fff}
.form-group textarea{min-height:80px;resize:vertical;font-family:inherit}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.modal-footer{padding:24px;border-top:1px solid rgba(255,255,255,0.1);display:flex;justify-content:flex-end;gap:12px}

/* Détail étudiant */
.student-profile{text-align:center;padding-bottom:20px;border-bottom:1px solid rgba(255,255,255,0.1);margin-bottom:20px}
.student-avatar{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;justify-content:center;font-size:32px;margin:0 auto 16px;font-weight:700}
.student-profile h3{font-size:24px;font-weight:600;margin-bottom:8px}
.info-section{margin-bottom:24px}
.info-section h4{font-size:14px;color:rgba(255,255,255,0.5);text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.info-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.info-item{background:rgba(255,255,255,0.03);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.05)}
.info-item.full{grid-column:1/-1}
.info-label{font-size:12px;color:rgba(255,255,255,0.5);margin-bottom:6px}
.info-value{font-size:15px;font-weight:500}
.info-value a{color:#667eea;text-decoration:none}
.inline-edit{width:100%;padding:8px 0;background:none;border:none;border-bottom:1px solid rgba(255,255,255,0.15);color:#fff;font-size:15px;font-weight:500;font-family:inherit;outline:none;transition:border-color 0.3s}
.inline-edit:focus{border-bottom-color:#667eea}
.inline-edit::placeholder{color:rgba(255,255,255,0.3)}
select.inline-edit{cursor:pointer;appearance:auto;padding:8px 4px;border-radius:6px;background:rgba(255,255,255,0.05)}
select.inline-edit option{background:#1a1a2e;color:#fff}
textarea.inline-edit{border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:10px;min-height:60px;resize:vertical;background:rgba(255,255,255,0.03)}
.payment-detail .payment-progress{height:12px;margin-bottom:12px}
.payment-stats{display:flex;justify-content:space-between;font-size:14px}
.payment-stats .paid{color:#2ed573}
.payment-stats .remaining{color:#ff9f43}
.status-section{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px;background:rgba(255,255,255,0.03);border-radius:12px;margin-bottom:20px}
.status-section .status-badge{font-size:14px;padding:8px 20px}
.meta-info{font-size:12px;color:rgba(255,255,255,0.4);text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.1)}
.notes-section textarea{width:100%;min-height:80px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;color:#fff;padding:14px;font-size:14px;resize:vertical;font-family:inherit}
.edit-input{width:100%;padding:12px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:10px;color:#fff;font-size:14px;margin-top:6px}
.edit-input:focus{outline:none;border-color:#667eea}

/* ============================================ */
/* ÉCHÉANCIER INTERACTIF                        */
/* ============================================ */
.echeancier-section{background:rgba(255,255,255,0.03);border-radius:12px;padding:20px;margin-top:12px}
.echeancier-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:10px}
.echeancier-stats{display:flex;gap:20px}
.echeancier-stats .stat{text-align:center}
.echeancier-stats .stat-value{font-size:20px;font-weight:700}
.echeancier-stats .stat-value.green{color:#2ed573}
.echeancier-stats .stat-value.orange{color:#ff9f43}
.echeancier-stats .stat-value.total-val{color:#667eea}
.echeancier-stats .stat-label{font-size:10px;color:rgba(255,255,255,0.5);text-transform:uppercase;letter-spacing:0.5px}

.echeance-list{max-height:350px;overflow-y:auto;margin-bottom:16px}
.echeance-item{display:flex;align-items:center;gap:12px;padding:12px 14px;background:rgba(255,255,255,0.02);border-radius:10px;margin-bottom:6px;border:1px solid rgba(255,255,255,0.05);transition:all 0.2s}
.echeance-item:hover{background:rgba(255,255,255,0.05);border-color:rgba(255,255,255,0.1)}
.echeance-item.is-paid{opacity:0.55}
.echeance-item.is-late{border-color:rgba(255,71,87,0.3);background:rgba(255,71,87,0.05)}

.ech-check{width:24px;height:24px;border-radius:6px;border:2px solid rgba(255,255,255,0.3);cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all 0.2s}
.ech-check:hover{border-color:#2ed573;background:rgba(46,213,115,0.1)}
.ech-check.checked{background:#2ed573;border-color:#2ed573}
.ech-check.checked::after{content:"✓";color:#fff;font-size:14px;font-weight:700}

.ech-date{font-size:13px;min-width:100px;color:rgba(255,255,255,0.8)}
.ech-amount{font-weight:700;min-width:80px;font-size:15px}
.ech-amount.unpaid{color:#ff9f43}
.ech-amount.paid{color:#2ed573}
.ech-type{font-size:11px;color:rgba(255,255,255,0.4);padding:3px 8px;background:rgba(255,255,255,0.05);border-radius:6px}
.ech-delete{width:28px;height:28px;border:none;background:rgba(255,71,87,0.15);color:#ff4757;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;margin-left:auto;opacity:0;transition:opacity 0.2s}
.echeance-item:hover .ech-delete{opacity:1}
.ech-delete:hover{background:rgba(255,71,87,0.3)}

/* Édition inline échéance */
.ech-date.editable,.ech-amount.editable{cursor:pointer;border-radius:6px;padding:2px 6px;margin:-2px -6px;transition:background 0.2s}
.ech-date.editable:hover,.ech-amount.editable:hover{background:rgba(102,126,234,0.15)}
.ech-edit-input{background:rgba(255,255,255,0.1);border:1px solid #667eea;border-radius:6px;color:#fff;font-size:inherit;font-weight:inherit;font-family:inherit;padding:4px 8px;outline:none;width:100%}
.ech-edit-input:focus{box-shadow:0 0 0 2px rgba(102,126,234,0.3)}
.ech-date-wrap{min-width:120px;position:relative}
.ech-amount-wrap{min-width:90px}
.ech-edit-input[type="date"]{color-scheme:dark;min-width:130px}
.ech-type.editable{cursor:pointer;transition:background 0.2s}
.ech-type.editable:hover{background:rgba(102,126,234,0.2)}
.ech-type-select{background:rgba(255,255,255,0.1);border:1px solid #667eea;border-radius:6px;color:#fff;font-size:11px;padding:3px 6px;outline:none;cursor:pointer}
.ech-type-select option{background:#1a1a2e;color:#fff}

/* Formulaire ajout échéance */
.add-echeance-form{display:grid;grid-template-columns:1fr 100px 120px auto;gap:10px;align-items:end;padding:16px;background:rgba(102,126,234,0.08);border-radius:10px;border:1px solid rgba(102,126,234,0.2)}
.add-echeance-form .field{display:flex;flex-direction:column;gap:4px}
.add-echeance-form .field label{font-size:11px;color:rgba(255,255,255,0.5);text-transform:uppercase;letter-spacing:0.5px}
.add-echeance-form input,.add-echeance-form select{padding:10px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:8px;color:#fff;font-size:13px}
.add-echeance-form input:focus,.add-echeance-form select:focus{outline:none;border-col